<mat-toolbar>
  <mat-toolbar-row>
    <a  mat-button  [matMenuTriggerFor]="users" routerLink="/candidates-list" [state]="{username:this.userName, accessLevel:'admin',account:this.account}" routerLinkActive="active">Manage Users</a>
    <mat-menu #users="matMenu">
      <a mat-menu-item routerLink="/create-candidate" [state]="{username:this.userName, accessLevel:'admin',account:this.account}" routerLinkActive="active">Add Candidate</a>
      <a mat-menu-item routerLink="/adminuser-create" [state]="{username:this.userName, accessLevel:'admin',account:this.account}" routerLinkActive="active">Add User</a>
      <a mat-menu-item routerLink="/candidates-list" [state]="{username:this.userName, accessLevel:'admin',account:this.account}" routerLinkActive="active">View Candidate</a>
    </mat-menu>
    <a  mat-button  [matMenuTriggerFor]="questions" routerLink="/manage-questionbank" [state]="{username:this.userName, accessLevel:'admin',account:this.account}" routerLinkActive="active">Manage Questions</a>
    <mat-menu #questions="matMenu">
      <a mat-menu-item  routerLink="/manage-questionbank" [state]="{username:this.userName, accessLevel:'admin',account:this.account}" routerLinkActive="active">Add Question</a>
      <a mat-menu-item  routerLink="/manage-questionbank-bulk" [state]="{username:this.userName, accessLevel:'admin',account:this.account}" routerLinkActive="active">Add Bulk Question</a>
      <a mat-menu-item  routerLink="/view-questionbank" [state]="{username:this.userName, accessLevel:'admin',account:this.account}" routerLinkActive="active"> View Question</a>
    </mat-menu>
    <a  mat-button  [matMenuTriggerFor]="metadata" routerLink="/jrss-create" [state]="{username:this.userName, accessLevel:'admin',account:this.account}" routerLinkActive="active">Manage Metadata</a>
    <mat-menu #metadata="matMenu">
      <a mat-menu-item  routerLink="/jrss-create" [state]="{username:this.userName, accessLevel:'admin',account:this.account}" routerLinkActive="active">Add Job Role</a>
      <a mat-menu-item  routerLink="/stream-create" [state]="{username:this.userName, accessLevel:'admin',account:this.account}" routerLinkActive="active">Add Technology Stream</a>
      <a mat-menu-item  routerLink="/testconfig-add" [state]="{username:this.userName, accessLevel:'admin',account:this.account}" routerLinkActive="active">Add Test Configuration</a>
    </mat-menu>
    <a  mat-button  routerLink="/workflow-config" [state]="{username:this.userName, accessLevel:'admin',account:this.account}" routerLinkActive="active">Manage WorkFlows</a>
    <a  mat-button  [matMenuTriggerFor]="openpositions" routerLink="/openpositions-list" [state]="{username:this.userName, accessLevel:'admin',account:this.account}" routerLinkActive="active">Manage OpenSeats</a>
    <mat-menu #openpositions="matMenu">
      <a mat-menu-item routerLink="/openpositions-create" [state]="{username:this.userName, accessLevel:'admin',account:this.account}" routerLinkActive="active">Add Open Seat</a>
      <a mat-menu-item routerLink="/openpositions-list" [state]="{username:this.userName, accessLevel:'admin',account:this.account}" routerLinkActive="active">View Open Seats</a>
    </mat-menu>
    <a  mat-button  routerLink="/view-testresults" [state]="{username:this.userName, accessLevel:'admin',account:this.account}" routerLinkActive="active">Test Results</a>
    <a  mat-button  routerLink="/login-component" routerLinkActive="active">Logout</a>
  </mat-toolbar-row>
</mat-toolbar>
<br/>

<div>
	<h4 class="my-0 mr-md-auto font-weight-normal">Add Candidate</h4>
	<br/>
</div>

<!-- form Test Config -->
<mat-card class="login-card">
	<mat-card-header></mat-card-header>
	<mat-card-content>
		<form [formGroup]="candidateForm">
		  <table class="open-full-width" cellspacing="0">
        <div>
		  		<tr>
            <td width="50%"> 
              <!-- Name -->
              <mat-form-field class="open-full-width">
                <input matInput placeholder="Name" formControlName="employeeName" name="employeeName" required [ngClass]="{ 'is-invalid': !formReset && submitted && myForm.employeeName.errors }">
                <div *ngIf="!formReset && submitted && myForm.employeeName.errors" class="invalid-feedback">
                  <div *ngIf="myForm.employeeName.errors.required">Name is required</div>
                </div>
              </mat-form-field>  
            </td>
            <!-- <td></td> -->
            <td width="70%">
              <!-- Type -->
              <mat-form-field class="open-full-width">
                <mat-select placeholder="Type" (selectionChange)="updateEmployeeTypeProfile($event.value)"
                  formControlName="employeeType" name="employeeType" [ngClass]="{ 'is-invalid': !formReset && submitted && myForm.employeeType.errors }">
                  <mat-option *ngFor="let employeeType of EmployeeType" value="{{employeeType}}">{{employeeType}}</mat-option>
                </mat-select>
                <div *ngIf="!formReset && submitted && myForm.employeeType.errors" class="invalid-feedback">
                  <div *ngIf="myForm.employeeType.errors.required">User Type is required</div>
                </div>
              </mat-form-field>
           </td>
          </tr>          
          <tr>
            <td> 
              <!-- Email -->
              <mat-form-field class="open-full-width">
                <input matInput placeholder="Email [This field is used as username.]" type="text" formControlName="email" id="inputEmail3" [ngClass]="{ 'is-invalid': submitted && myForm.email.errors }">
                  <div *ngIf="submitted && myForm.email.errors" class="invalid-feedback">
                      <div *ngIf="myForm.email.errors.required">Email is required</div>
                        <div *ngIf="myForm.email.errors.pattern">Invalid Email</div>
                      </div>
              </mat-form-field>
           </td>
           <td>
              <!-- Candidate Line Of Business -->
              <div  *ngIf="displayRegularUIFields">
                <mat-form-field class="open-full-width">
                  <mat-select placeholder="Candidate Line Of Business"  (selectionChange)="updateUserLOBProfile($event.value)"
                    formControlName="userLOB" [ngClass]="{ 'is-invalid': !formReset && submitted && myForm.userLOB.errors }">              
                    <mat-option *ngFor="let userLOB of UserLOB" value="{{userLOB.lob}}">{{userLOB.lob}}
                    </mat-option>
                  </mat-select>
                  <div *ngIf="!formReset && submitted && myForm.userLOB.errors" class="invalid-feedback">
                      <div *ngIf="myForm.userLOB.errors.required">Candidate Line Of Business is required</div>
                  </div>
                </mat-form-field>
              </div>
          </td>
        </tr>
        <tr>
          <td>
              <!-- Candidate Location -->
              <div  *ngIf="displayRegularUIFields">
              <mat-form-field class="open-full-width">
                <mat-select placeholder="Candidate Location"  (selectionChange)="updateUserPositionLocationProfile($event.value)"
                  formControlName="userPositionLocation" [ngClass]="{ 'is-invalid': !formReset && submitted && myForm.userPositionLocation.errors }">
                  
                  <mat-option *ngFor="let data of UserPositionLocation" value="{{data.positionLocation}}">{{data.positionLocation}}
                  </mat-option>
                </mat-select>
                <div *ngIf="!formReset && submitted && myForm.userPositionLocation.errors" class="invalid-feedback">
                  <div *ngIf="myForm.userPositionLocation.errors.required">Candidate Location is required</div>
                </div>
              </mat-form-field>
              </div>
          </td>   
          <td>
            <!-- Candidate Location -->
            <div  *ngIf="displayRegularUIFields">
              <mat-form-field class="open-full-width">
                  <mat-select placeholder="Band"  (selectionChange)="updateBandProfile($event.value)"
                  formControlName="band" [ngClass]="{ 'is-invalid': !formReset && submitted && myForm.band.errors }">                  
                  <mat-option *ngFor="let band of Band" value="{{band.band}}">{{band.band}}</mat-option>
                </mat-select>
                <div *ngIf="!formReset && submitted && myForm.band.errors" class="invalid-feedback">
                  <div *ngIf="myForm.band.errors.required">Band is required</div>
                </div>
              </mat-form-field>
            </div>
          </td>
        </tr>
        <tr>
          <td>
            <!-- Job Role -->
            <mat-form-field class="open-full-width">
              <mat-select placeholder="Job Role"  (selectionChange)="updateJrssProfile($event.value)"
              formControlName="JRSS" [ngClass]="{ 'is-invalid': !formReset && submitted && myForm.JRSS.errors }">
              
              <mat-option *ngFor="let jrss of JRSS" value="{{jrss.jrss}}">{{jrss.jrss}}
              </mat-option>
            </mat-select>
            <div *ngIf="!formReset && submitted && myForm.JRSS.errors" class="invalid-feedback">
            <div *ngIf="myForm.JRSS.errors.required">Job Role is required</div>
            </div>
            </mat-form-field>
          </td>
          <td>
            <!-- Technology Stream -->
            <mat-form-field class="open-full-width">
              <mat-select multiple placeholder="Technology Stream"  formControlName="technologyStream" [ngClass]="{ 'is-invalid': !formReset && submitted && myForm.technologyStream.errors }">
                <mat-option *ngFor="let data of technologyStream" value="{{data.value}}" >{{data.value}}</mat-option>
              </mat-select>
              <div *ngIf="!formReset && submitted && myForm.technologyStream.errors" class="invalid-feedback">
                <div *ngIf="myForm.technologyStream.errors.required">Technology Stream is required</div>
              </div>
            </mat-form-field>
          </td>
        </tr>
        <tr>
          <td>
            <!-- Mobile No -->
            <mat-form-field class="open-full-width">
              <input matInput placeholder="Mobile No" formControlName="phoneNumber" name="phoneNumber" required [ngClass]="{ 'is-invalid': !formReset && submitted && myForm.phoneNumber.errors }">
              <div *ngIf="!formReset && submitted && myForm.phoneNumber.errors" class="invalid-feedback">
                <div *ngIf="myForm.phoneNumber.errors.required">Mobile No is required</div>
                <div *ngIf="myForm.phoneNumber.errors.pattern">Invalid Phone Number</div>                
              </div>
            </mat-form-field>
          </td>
          <td>
            <!-- Date of Birth -->
            <div  *ngIf="displayContractorUIFields">
              <mat-form-field class="open-full-width">
              <input matInput type="date"  placeholder="Date of Birth" formControlName="dateOfJoining"  required [ngClass]="{ 'is-invalid': !formReset && submitted && myForm.dateOfJoining.errors }">
              <div *ngIf="!formReset && submitted && myForm.dateOfJoining.errors" class="invalid-feedback">
                <div *ngIf="myForm.dateOfJoining.errors.required">Date of Birth is required</div>
              </div>
              </mat-form-field>
            </div>
            <div  *ngIf="displayRegularUIFields">
              <mat-form-field class="open-full-width">
              <input matInput type="date"  placeholder="Date of Joining" formControlName="dateOfJoining"  required [ngClass]="{ 'is-invalid': !formReset && submitted && myForm.dateOfJoining.errors }">
              <div *ngIf="!formReset && submitted && myForm.dateOfJoining.errors" class="invalid-feedback">
                <div *ngIf="myForm.dateOfJoining.errors.required">Date of Joining is required</div>
              </div>
              </mat-form-field>
           </div>
          </td>          
        </tr>
        <tr>
          <td>
            <!-- Account -->
            <mat-form-field class="open-full-width">
              <mat-select placeholder="Account" (selectionChange)="updateAccountProfile($event.value)" 
                formControlName="account"  [ngClass]="{ 'is-invalid': !formReset && submitted && myForm.account.errors }">            
                <mat-option *ngFor="let account of AccountArray" value="{{account}}" >{{account}}</mat-option>
              </mat-select>
              <div *ngIf="!formReset && submitted && myForm.account.errors" class="invalid-feedback">
                <div *ngIf="myForm.account.errors.required">Account is required</div>
              </div>
            </mat-form-field>
          </td>
          <td>
            <!-- Candidate Resume -->
            <div class="form-group row">
              <label class="col-sm-6 col-form-label">Candidate Resume</label>
              <div class="col-sm-6">
                <input type="file" formControlName="candidateResume" id="candidateResumeID" (change)="addResume($event)" size="50">
              </div>
            </div>
          </td>>
        </tr>
        <br/>
      </div>

      <div  *ngIf="displayRegularUIFields">
        <div>
          <mat-toolbar>
            <mat-toolbar-row>             
                <h6>
                  <a data-toggle="collapse" href="#collapse1" (click)="getOpenPositionDetails()"><b>Calculate Gross Profit(Optional)</b>
                    <p><b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                      &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Open Position Details
                      &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                      &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                      &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                      &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                      &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                      &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                      &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Candidate Details&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</b></p></a>
                </h6>            
            </mat-toolbar-row>
          </mat-toolbar>
          <div id="collapse1" class="panel-collapse collapse" *ngIf="displayGPCalculate">
            <div class="panel-body">
              <br/>
              <h6><b>Please select Open Position and Candidate details below to calculate Gross Profit</b></h6>
              <br/>

                  <tr>
                    <td width="50%">
                      <mat-form-field class="open-full-width">
                        <div [formGroup]="myOpenPositionGroup" >
                          <mat-select placeholder="Open Position"  (selectionChange)="updateOpenPositionProfile($event.value)"
                          formControlName="positionName" id="inputPositionName" [ngClass]="{ 'is-invalid': !formReset && submitted && myOpenForm.positionName.errors }">
                          <mat-option *ngFor="let data of OpenPositions" value="{{data.positionName}}">{{data.positionName}} </mat-option>
                          </mat-select>
                          <div *ngIf="!formReset && submitted && myOpenForm.positionName.errors" class="invalid-feedback">
                            <div *ngIf="myOpenForm.positionName.errors.required">Open Position is required</div>
                          </div>
                        </div>
                      </mat-form-field>
                    </td>
                    
                    <td width="70%">
                      <mat-form-field class="open-full-width">
                        <div [formGroup]="myOpenPositionGroup" >
                          <mat-select placeholder="Candidate Line Of Business"  (selectionChange)="updateGPUserLOBProfile($event.value)"
                          formControlName="gpUserLOB" id="inputGPUserLOB" [ngClass]="{ 'is-invalid': !formReset && submitted && myOpenForm.gpUserLOB.errors }">
                          <mat-option *ngFor="let userLOB of UserLOB" value="{{userLOB.lob}}">{{userLOB.lob}} </mat-option>
                          </mat-select>
                        </div>
                      </mat-form-field>
                    </td>
                  </tr>

                  <tr>
                    <td>
                      <mat-form-field class="open-full-width">
                        <div [formGroup]="myOpenPositionGroup" >
                          <mat-select placeholder="Position ID"  
                          formControlName="positionID" id="inputPositionID" [ngClass]="{ 'is-invalid': !formReset && submitted && myOpenForm.positionID.errors }">
                          <mat-option *ngFor="let data of PositionID" value="{{data}}" >{{data}} </mat-option>
                          </mat-select>
                        </div>
                      </mat-form-field>
                    </td>
                    <td>
                      <mat-form-field class="open-full-width">
                        <div [formGroup]="myOpenPositionGroup" >
                          <mat-select placeholder="Candidate Location" (selectionChange)="updateGPUserPositionLocationProfile($event.value)"  
                          formControlName="gpUserPositionLocation" id="inputGPUserPositionLocation" [ngClass]="{ 'is-invalid': !formReset && submitted && myOpenForm.gpUserPositionLocation.errors }">
                          <mat-option *ngFor="let data of UserPositionLocation" value="{{data.positionLocation}}" >{{data.positionLocation}} </mat-option>
                          </mat-select>
                        </div>
                      </mat-form-field>
                    </td>
                  </tr>

                  <tr>
                    <td>
                      <mat-form-field class="open-full-width">
                        <div [formGroup]="myOpenPositionGroup" >
                          <mat-select placeholder="Line Of Business"  
                          formControlName="lineOfBusiness" id="inputLineOfBusiness" [ngClass]="{ 'is-invalid': !formReset && submitted && myOpenForm.lineOfBusiness.errors }">
                          <mat-option *ngFor="let data of LineOfBusiness" value="{{data}}" >{{data}} </mat-option>
                          </mat-select>
                        </div>
                      </mat-form-field>
                    </td>
                    <td>
                      <mat-form-field class="open-full-width">
                        <div [formGroup]="myOpenPositionGroup" >
                          <mat-select placeholder="Band" (selectionChange)="updateGPUserBandProfile($event.value)"  
                          formControlName="gpUserBand" id="inputGpUserBand" [ngClass]="{ 'is-invalid': !formReset && submitted && myOpenForm.gpUserBand.errors }">
                          <mat-option *ngFor="let band of Band" value="{{band.band}}">{{band.band}} </mat-option>
                          </mat-select>
                        </div>
                      </mat-form-field>
                    </td>
                  </tr>
                  <tr>
                    <td>
                      <mat-form-field class="open-full-width">
                        <div [formGroup]="myOpenPositionGroup" >
                          <mat-select placeholder="Position Location"  
                          formControlName="positionLocation" id="inputPositionLocation" [ngClass]="{ 'is-invalid': !formReset && submitted && myOpenForm.positionLocation.errors }">
                          <mat-option *ngFor="let data of PositionLocation" value="{{data}}" >{{data}} </mat-option>
                          </mat-select>
                        </div>
                      </mat-form-field>
                    </td>
                  </tr>
                  <tr>
                    <td>
                      <mat-form-field class="open-full-width">
                        <div [formGroup]="myOpenPositionGroup" >
                          <mat-select placeholder="Rate Card Job Role"  
                          formControlName="rateCardJobRole" id="inputRateCardJobRole" 
                          [ngClass]="{ 'is-invalid': !formReset && submitted && myOpenForm.rateCardJobRole.errors }">
                          <mat-option *ngFor="let data of RateCardJobRole" value="{{data}}">{{data}} </mat-option>
                          </mat-select>
                        </div>
                      </mat-form-field>
                    </td>
                  </tr>
                  <tr>
                    <td>
                      <mat-form-field class="open-full-width">
                        <div [formGroup]="myOpenPositionGroup" >
                          <mat-select placeholder="Competency Level"  
                          formControlName="competencyLevel" id="inputCompetencyLevel" 
                          [ngClass]="{ 'is-invalid': !formReset && submitted && myOpenForm.competencyLevel.errors }">
                          <mat-option *ngFor="let data of CompetencyLevel" value="{{data}}" >{{data}} </mat-option>
                          </mat-select>
                        </div>
                      </mat-form-field>
                    </td>
                  </tr>
                <tr>
                  <td width="5%">
                  <td width="90%">
                    <div [formGroup]="myOpenPositionGroup" class="form-group row">
                      <label for="inputGP" class="col-sm-4 col-form-label">Gross Profit(%)</label>
                      <div class="col-sm-3">
                        <input class="form-control" readonly type="text" formControlName="grossProfit" id="inputGP">
                      </div>
                      <div>
                        &nbsp;&nbsp;&nbsp;
                        <button style="background-color:#0043CE;" class="btn btn-success btn-sm" type="button" (click)="calculateGP(this.myOpenPositionGroup.value.gpUserPositionLocation,this.myOpenPositionGroup.value.gpUserLOB,this.myOpenPositionGroup.value.gpUserBand,this.myOpenPositionGroup.value.positionName)">Calculate GP</button>
                      </div>
                    </div>
                  </td>
                  <td width="5%">
                </tr>

            </div>
          </div>
        </div>
      </div>
      <br/>

    </table> 
  </form>
    </mat-card-content>
    <mat-card-actions>
    <div class="row justify-content-center">
      <button mat-raised-button color="primary" (click)="onSubmit()">Save</button>
      <button mat-raised-button color="primary" (click)="resetForm()">Reset</button>
      <button mat-raised-button color="primary" (click)="cancelForm()">Cancel</button>
    </div>
    </mat-card-actions>
</mat-card>
